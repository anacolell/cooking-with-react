(this["webpackJsonpreact-project"]=this["webpackJsonpreact-project"]||[]).push([[0],{59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var c=n(2),i=n.n(c),a=n(27),s=n.n(a),r=n(11),l=n(4),d=n(5),o=n(1);function j(e){var t=e.name,n=e.amount;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("span",{children:t}),Object(o.jsx)("span",{children:n})]})}function u(e){var t=e.ingredients.map((function(e){return Object(o.jsx)(j,Object(d.a)({},e),e.id)}));return Object(o.jsx)("div",{className:"ingredient-grid",children:t})}var b=n(10),m=n(9);function h(e){var t=Object(c.useContext)(I),n=t.handleRecipeDelete,i=t.handleRecipeSelect,a=Object(c.useState)(!1),s=Object(l.a)(a,2),r=s[0],d=s[1],j=Object(c.useState)("initial"),h=Object(l.a)(j,2),p=h[0],O=h[1],x=Object(c.useRef)(),g=Object(c.useRef)(),v=e._id,_=e.image,f=e.name,N=e.cookTime,C=e.servings,y=e.instructions,k=e.ingredients,F=e.author;function S(){var e=x.current.getBoundingClientRect().height,t=g.current.getBoundingClientRect().height;O(Math.max(e,t))}return Object(c.useEffect)(S,[f,N,C,y,k,F]),Object(c.useEffect)((function(){return window.addEventListener("resize",S),function(){return window.removeEventListener("resize",S)}}),[]),Object(o.jsxs)("div",{className:"recipe ".concat(r?"flip":""),onClick:function(){return d(!r)},style:{height:p},children:[Object(o.jsxs)("div",{className:"front",ref:x,style:{height:p},children:[Object(o.jsx)("p",{className:"text-tag",children:"click for instructions"}),Object(o.jsx)("img",{className:"recipe__image",src:_,alt:""}),Object(o.jsx)("div",{className:"recipe__header",children:Object(o.jsx)("h3",{className:"recipe__title",children:f})})]}),Object(o.jsxs)("div",{className:"back",ref:g,style:{height:p},children:[Object(o.jsxs)("div",{className:"btn-container",children:[Object(o.jsx)("span",{className:"btn btn-recipe",onClick:function(){return i(v)},children:Object(o.jsx)(b.a,{icon:m.a})}),Object(o.jsx)("span",{className:"btn btn-recipe",onClick:function(){return n(v)},children:Object(o.jsx)(b.a,{icon:m.c})})]}),Object(o.jsxs)("div",{className:"recipe__row",children:[Object(o.jsx)("span",{className:"recipe__label",children:"Cook Time:"}),Object(o.jsx)("span",{className:"recipe__value",children:N})]}),Object(o.jsxs)("div",{className:"recipe__row",children:[Object(o.jsx)("span",{className:"recipe__label",children:"Servings:"}),Object(o.jsx)("span",{className:"recipe__value",children:C})]}),Object(o.jsxs)("div",{className:"recipe__row",children:[Object(o.jsx)("span",{className:"recipe__label",children:"Ingredients:"}),Object(o.jsx)("div",{className:"recipe__value recipe__value--indented",children:Object(o.jsx)(u,{ingredients:k})})]}),Object(o.jsxs)("div",{className:"recipe__row",children:[Object(o.jsx)("span",{className:"recipe__label",children:"Instructions:"}),Object(o.jsx)("div",{className:"recipe__value recipe__instructions recipe__value--indented",children:y})]}),Object(o.jsxs)("div",{className:"recipe__row recipe__author",children:[Object(o.jsx)("span",{className:"recipe__label",children:"Created by "}),Object(o.jsx)("span",{className:"recipe__value",children:F})]})]})]})}var p=n(29);function O(e){e.recipes;var t=e.filteredRecipes,n=e.loading;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"loading",children:n&&"Loading..."}),Object(o.jsx)(p.a,{breakpointCols:{default:4,1100:3,800:2,600:1},className:"my-masonry-grid",columnClassName:"my-masonry-grid_column",children:t.map((function(e){return Object(o.jsx)(h,Object(d.a)({},e),e._id)}))})]})}var x=n(7),g=n.n(x);function v(e){var t=e.ingredient,n=e.handleIngredientDelete,i=e.handleIngredientChange,a=Object(c.useState)(t),s=Object(l.a)(a,2),r=s[0],j=s[1],u=function(e){j(Object(d.a)(Object(d.a)({},r),e))};return Object(c.useEffect)((function(){i(r.id,r)}),[r,i]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("input",{className:"recipe-edit__input",type:"text",onChange:function(e){return u({name:e.target.value})},value:r.name}),Object(o.jsx)("input",{className:"recipe-edit__input",type:"text",onChange:function(e){return u({amount:e.target.value})},value:r.amount}),Object(o.jsx)("button",{className:"btn btn-ingredient-delete",onClick:function(){return n(t.id)},children:"\xd7"})]})}var _=n(61);function f(e){var t=e.recipe,n=Object(c.useContext)(I),i=n.handleRecipeChange,a=n.handleRecipeSelect,s=Object(c.useState)(t),j=Object(l.a)(s,2),u=j[0],h=j[1];function p(e){h(Object(d.a)(Object(d.a)({},u),e))}function O(e,t){var n=u.ingredients,c=n.findIndex((function(t){return t.id===e}));n[c]=t}function x(e){p({ingredients:u.ingredients.filter((function(t){return t.id!==e}))})}return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"overlay"}),Object(o.jsxs)("div",{className:"recipe-edit",children:[Object(o.jsxs)("div",{className:"recipe-edit__details-grid",children:[Object(o.jsx)("label",{htmlFor:"image",className:"recipe-edit__label",children:"Image"}),Object(o.jsx)("input",{type:"file",onChange:function(e){!function(e){var t=new FormData;t.append("file",e[0]),t.append("upload_preset","myrecipes"),g.a.post("https://api.cloudinary.com/v1_1/dwlvlqpso/image/upload",t).then((function(e){p({image:e.data.secure_url}),console.log("image set")}))}(e.target.files)}}),Object(o.jsx)("label",{htmlFor:"name",className:"recipe-edit__label",children:"Name"}),Object(o.jsx)("input",{type:"text",name:"name",id:"name",value:u.name,onChange:function(e){return p({name:e.target.value})},className:"recipe-edit__input"}),Object(o.jsx)("label",{htmlFor:"cookTime",className:"recipe-edit__label",children:"Cook Time"}),Object(o.jsx)("input",{type:"text",name:"cookTime",id:"cookTime",value:u.cookTime,onChange:function(e){return p({cookTime:e.target.value})},className:"recipe-edit__input"}),Object(o.jsx)("label",{htmlFor:"servings",className:"recipe-edit__label",children:"Servings"}),Object(o.jsx)("input",{type:"number",min:"1",name:"servings",id:"servings",value:u.servings,onChange:function(e){return p({servings:parseInt(e.target.value)||""})},className:"recipe-edit__input"})]}),Object(o.jsxs)("div",{className:"recipe-edit__instructions",children:[Object(o.jsx)("label",{htmlFor:"instructions",className:"recipe-edit__label",children:"Instructions"}),Object(o.jsx)("textarea",{name:"instructions",className:"recipe-edit__input",value:u.instructions,onChange:function(e){return p({instructions:e.target.value})},id:"instructions"})]}),Object(o.jsx)("br",{}),Object(o.jsxs)("div",{className:"recipe-edit__add_ingredient",children:[Object(o.jsx)("label",{className:"recipe-edit__label",children:"Ingredients"}),Object(o.jsx)("div",{onClick:function(){return function(){var e={id:Object(_.a)(),name:"",amount:""};p({ingredients:[].concat(Object(r.a)(u.ingredients),[e])})}()},children:Object(o.jsx)(b.a,{className:"recipe-edit__icon-add-ingredient",icon:m.b})})]}),Object(o.jsxs)("div",{className:"recipe-edit__ingredient-grid",children:[Object(o.jsx)("div",{children:"Name"}),Object(o.jsx)("div",{children:"Amount"}),Object(o.jsx)("div",{}),u.ingredients.map((function(e){return Object(o.jsx)(v,{currentRecipe:u,handleIngredientChange:O,handleIngredientDelete:x,ingredient:e},e.id)}))]}),Object(o.jsxs)("div",{className:"recipe-edit__details-grid",children:[Object(o.jsx)("label",{htmlFor:"author",className:"recipe-edit__label",children:"Created by"}),Object(o.jsx)("input",{type:"text",name:"author",id:"author",value:u.author,onChange:function(e){return p({author:e.target.value})},className:"recipe-edit__input"})]}),Object(o.jsxs)("div",{className:"recipe-edit__button-container",children:[Object(o.jsx)("button",{className:"btn btn-edit btn-edit-cancel",onClick:function(){return a(void 0)},children:"Cancel"}),Object(o.jsx)("button",{className:"btn btn-edit btn-edit-update",onClick:function(){i(u._id,u),a(void 0)},children:"Update"})]})]})]})}function N(e){var t=e.ingredient,n=e.handleIngredientCreateChange,i=e.handleIngredientCreateDelete,a=Object(c.useState)(t),s=Object(l.a)(a,2),r=s[0],j=s[1],u=function(e){j(Object(d.a)(Object(d.a)({},r),e)),console.log(e)};return Object(c.useEffect)((function(){n(r.id,r)}),[r,n]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("input",{className:"recipe-edit__input",type:"text",onChange:function(e){return u({name:e.target.value})},value:r.name}),Object(o.jsx)("input",{className:"recipe-edit__input",type:"text",onChange:function(e){return u({amount:e.target.value})},value:r.amount}),Object(o.jsx)("button",{className:"btn btn-ingredient-delete",onClick:function(){return i(t.id)},children:"\xd7"})]})}function C(){var e=Object(c.useState)({id:Object(_.a)(),image:"/img/default.jpg",name:"",servings:1,cookTime:"",instructions:"",ingredients:[{id:Object(_.a)(),name:"",amount:""}],author:""}),t=Object(l.a)(e,2),n=t[0],i=t[1],a=Object(c.useContext)(I),s=a.handleCreateForm,j=a.handleRecipeAdd;function u(e){i(Object(d.a)(Object(d.a)({},n),e))}function h(e,t){var c=n.ingredients,i=c.findIndex((function(t){return t.id===e}));c[i]=t}function p(e){u({ingredients:n.ingredients.filter((function(t){return t.id!==e}))})}return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"overlay"}),Object(o.jsxs)("div",{className:"recipe-edit",children:[Object(o.jsxs)("div",{className:"recipe-edit__details-grid",children:[Object(o.jsx)("label",{htmlFor:"image",className:"recipe-edit__label",children:"Image"}),Object(o.jsx)("input",{type:"file",onChange:function(e){!function(e){var t=new FormData;t.append("file",e[0]),t.append("upload_preset","myrecipes"),g.a.post("https://api.cloudinary.com/v1_1/dwlvlqpso/image/upload",t).then((function(e){u({image:e.data.secure_url}),console.log("image set")}))}(e.target.files)}}),Object(o.jsx)("label",{htmlFor:"name",className:"recipe-edit__label",children:"Name"}),Object(o.jsx)("input",{type:"text",name:"name",id:"name",value:n.name,onChange:function(e){return u({name:e.target.value})},className:"recipe-edit__input"}),Object(o.jsx)("label",{htmlFor:"cookTime",className:"recipe-edit__label",children:"Cook Time"}),Object(o.jsx)("input",{type:"text",name:"cookTime",id:"cookTime",value:n.cookTime,onChange:function(e){return u({cookTime:e.target.value})},className:"recipe-edit__input"}),Object(o.jsx)("label",{htmlFor:"servings",className:"recipe-edit__label",children:"Servings"}),Object(o.jsx)("input",{type:"number",min:"1",name:"servings",id:"servings",value:n.servings,onChange:function(e){return u({servings:parseInt(e.target.value)||""})},className:"recipe-edit__input"})]}),Object(o.jsxs)("div",{className:"recipe-edit__instructions",children:[Object(o.jsx)("label",{htmlFor:"instructions",className:"recipe-edit__label",children:"Instructions"}),Object(o.jsx)("textarea",{name:"instructions",className:"recipe-edit__input",value:n.instructions,onChange:function(e){return u({instructions:e.target.value})},id:"instructions"})]}),Object(o.jsx)("br",{}),Object(o.jsxs)("div",{className:"recipe-edit__add_ingredient",children:[Object(o.jsx)("label",{className:"recipe-edit__label",children:"Ingredients"}),Object(o.jsx)("div",{onClick:function(){return function(){var e={id:Object(_.a)(),name:"",amount:""};u({ingredients:[].concat(Object(r.a)(n.ingredients),[e])})}()},children:Object(o.jsx)(b.a,{className:"recipe-edit__icon-add-ingredient",icon:m.b})})]}),Object(o.jsxs)("div",{className:"recipe-edit__ingredient-grid",children:[Object(o.jsx)("div",{children:"Name"}),Object(o.jsx)("div",{children:"Amount"}),Object(o.jsx)("div",{}),n.ingredients.map((function(e){return Object(o.jsx)(N,{newRecipe:n,handleIngredientCreateChange:h,handleIngredientCreateDelete:p,ingredient:e},e.id)}))]}),Object(o.jsxs)("div",{className:"recipe-edit__details-grid",children:[Object(o.jsx)("label",{htmlFor:"author",className:"recipe-edit__label",children:"Created by"}),Object(o.jsx)("input",{type:"text",name:"author",id:"author",value:n.author,onChange:function(e){return u({author:e.target.value})},className:"recipe-edit__input"})]}),Object(o.jsxs)("div",{className:"recipe-edit__button-container",children:[Object(o.jsx)("button",{className:"btn btn-edit btn-edit-cancel",onClick:s,children:"Cancel"}),Object(o.jsx)("button",{className:"btn btn-edit btn-edit-update",onClick:function(){return j(n)},children:"Create recipe"})]})]})]})}var y=n(28);function k(){var e=Object(c.useContext)(I).handleRecipeSearch;return Object(o.jsxs)("div",{className:"search-wrapper",children:[Object(o.jsx)("div",{className:"search-icon",children:Object(o.jsx)(y.a,{})}),Object(o.jsx)("input",{className:"searchbox",type:"text",placeholder:"Search a recipe",onChange:function(t){return e(t.target.value)}})]})}function F(e){var t=e.sortRecipes;return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{className:"sort-menu",children:Object(o.jsxs)("select",{onChange:function(e){return t(e.target.value)},children:[Object(o.jsx)("option",{value:"name",children:"Sort by"}),Object(o.jsx)("option",{value:"nameaz",children:"Name, A-Z"}),Object(o.jsx)("option",{value:"nameza",children:"Name, Z-A"}),Object(o.jsx)("option",{value:"oldest",children:"Created (oldest)"}),Object(o.jsx)("option",{value:"newest",children:"Created (newest)"})]})})})}var S=n(12);function w(){return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("footer",{className:"footer",children:Object(o.jsxs)("div",{className:"logo-container",children:[Object(o.jsx)("img",{className:"footer-logo",alt:"logo",src:"../img/logo.png"}),Object(o.jsxs)("div",{className:"social-icons",children:[Object(o.jsx)("a",{href:"/",children:Object(o.jsx)(S.b,{className:"social-icon"})}),Object(o.jsx)("a",{href:"/",children:Object(o.jsx)(S.a,{className:"social-icon"})}),Object(o.jsx)("a",{href:"/",children:Object(o.jsx)(S.d,{className:"social-icon"})}),Object(o.jsx)("a",{href:"/",children:Object(o.jsx)(S.c,{className:"social-icon"})}),Object(o.jsx)("a",{href:"/",children:Object(o.jsx)(S.e,{className:"social-icon"})})]})]})})})}n(59);var I=i.a.createContext();var R=function(){var e=Object(c.useState)(),t=Object(l.a)(e,2),n=t[0],i=t[1],a=Object(c.useState)([]),s=Object(l.a)(a,2),d=s[0],j=s[1],u=Object(c.useState)(),b=Object(l.a)(u,2),m=b[0],h=b[1],p=Object(c.useState)(!1),x=Object(l.a)(p,2),v=x[0],_=x[1];function N(){_(!v)}var y=d.find((function(e){return e._id===n}));function S(){g.a.get("/api").then((function(e){var t=e.data;j(t)})).catch((function(e){return console.error("Error: ".concat(e))}))}Object(c.useEffect)((function(){S()}),[]);var R={handleRecipeAdd:function(e){g()({url:"/api/save",method:"POST",data:e}).then((function(){console.log(e),console.log("Data has been sent to the server")})).catch((function(){console.log("Internal server error")})).then(S()),N()},handleRecipeDelete:function(e){g.a.delete("api/delete/"+e).then((function(t){j(d.filter((function(t){return t._id!==e})))}))},handleRecipeSelect:function(e){i(e)},handleRecipeChange:function(e,t){g.a.put("/api/put/"+e,t),S()},handleRecipeSearch:function(e){h(e)},handleCreateForm:N},T=null!=m?d.filter((function(e){return e.name.toLowerCase().includes(m)})):d;return Object(o.jsxs)(I.Provider,{value:R,children:[Object(o.jsx)("div",{className:"banner",children:Object(o.jsxs)("div",{className:"banner-container",children:[Object(o.jsx)("h1",{className:"title",children:"Recipely"}),Object(o.jsx)("p",{className:"subtitle",children:"Simple recipes that make you feel good"})]})}),Object(o.jsxs)("div",{className:"container",children:[Object(o.jsxs)("div",{className:"header",children:[Object(o.jsx)("div",{className:"add-btn-container",children:Object(o.jsx)("button",{className:"btn btn-add",onClick:N,children:"Add recipe"})}),Object(o.jsxs)("div",{className:"filterbox",children:[Object(o.jsx)(k,{}),Object(o.jsx)(F,{sortRecipes:function(e){var t={nameaz:"name",nameza:"name",oldest:"createdAt",newest:"createdAt"}[e],n=Object(r.a)(d).sort((function(n,c){return"newest"===e||"nameza"===e?c[t].localeCompare(n[t]):n[t].localeCompare(c[t])}));j(n)}})]})]}),v&&Object(o.jsx)(C,{}),Object(o.jsx)(O,{recipes:d,filteredRecipes:T}),y&&Object(o.jsx)(f,{recipe:y})]}),Object(o.jsx)(w,{})]})};s.a.render(Object(o.jsx)(i.a.StrictMode,{children:Object(o.jsx)(R,{})}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.6cf30c39.chunk.js.map