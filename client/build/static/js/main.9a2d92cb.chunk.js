(this["webpackJsonpreact-project"]=this["webpackJsonpreact-project"]||[]).push([[0],{53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),a=n(23),r=n.n(a),s=n(4),l=n(5),d=n(0);function o(e){var t=e.name,n=e.amount;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("span",{children:t}),Object(d.jsx)("span",{children:n})]})}function j(e){var t=e.ingredients.map((function(e){return Object(d.jsx)(o,Object(l.a)({},e),e.id)}));return Object(d.jsx)("div",{className:"ingredient-grid",children:t})}var u=n(7),b=n(6);function p(e){var t=Object(c.useContext)(C),n=t.handleRecipeDelete,i=t.handleRecipeSelect,a=Object(c.useState)(!1),r=Object(s.a)(a,2),l=r[0],o=r[1],p=Object(c.useState)("initial"),m=Object(s.a)(p,2),h=m[0],O=m[1],_=Object(c.useRef)(),x=Object(c.useRef)(),v=e._id,g=e.image,f=e.name,N=e.cookTime,k=e.servings,y=e.instructions,R=e.ingredients,S=e.author;function w(){var e=_.current.getBoundingClientRect().height,t=x.current.getBoundingClientRect().height;O(Math.max(e,t))}return Object(c.useEffect)(w,[f,N,k,y,R]),Object(c.useEffect)((function(){return window.addEventListener("resize",w),function(){return window.removeEventListener("resize",w)}}),[]),Object(d.jsxs)("div",{className:"recipe ".concat(l?"flip":""),onClick:function(){return o(!l)},style:{height:h},children:[Object(d.jsxs)("div",{className:"front",ref:_,children:[Object(d.jsx)("img",{className:"recipe__image",src:g,alt:""}),Object(d.jsx)("div",{className:"recipe__header",children:Object(d.jsx)("h3",{className:"recipe__title",children:f})})]}),Object(d.jsxs)("div",{className:"back",ref:x,children:[Object(d.jsxs)("div",{className:"btn-container",children:[Object(d.jsx)("span",{className:"btn btn--edit",onClick:function(){return i(v)},children:Object(d.jsx)(u.a,{icon:b.a})}),Object(d.jsx)("span",{className:"btn btn--delete",onClick:function(){return n(v)},children:Object(d.jsx)(u.a,{icon:b.d})})]}),Object(d.jsxs)("div",{className:"recipe__row",children:[Object(d.jsx)("span",{className:"recipe__label",children:"Cook Time:"}),Object(d.jsx)("span",{className:"recipe__value",children:N})]}),Object(d.jsxs)("div",{className:"recipe__row",children:[Object(d.jsx)("span",{className:"recipe__label",children:"Servings:"}),Object(d.jsx)("span",{className:"recipe__value",children:k})]}),Object(d.jsxs)("div",{className:"recipe__row",children:[Object(d.jsx)("span",{className:"recipe__label",children:"Ingredients:"}),Object(d.jsx)("div",{className:"recipe__value recipe__value--indented",children:Object(d.jsx)(j,{ingredients:R})})]}),Object(d.jsxs)("div",{className:"recipe__row",children:[Object(d.jsx)("span",{className:"recipe__label",children:"Instructions:"}),Object(d.jsx)("div",{className:"recipe__value recipe__instructions recipe__value--indented",children:y})]}),Object(d.jsxs)("div",{className:"recipe__row recipe__author",children:[Object(d.jsx)("span",{className:"recipe__label",children:"Created by "}),Object(d.jsx)("span",{className:"recipe__value",children:S})]})]})]})}var m=n(24);function h(e){e.recipes;var t=e.filteredRecipes;return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(m.a,{breakpointCols:{default:4,1100:3,800:2,600:1},className:"my-masonry-grid",columnClassName:"my-masonry-grid_column",children:t.map((function(e){return Object(d.jsx)(p,Object(l.a)({},e),e._id)}))})})}var O=n(25),_=n(8),x=n.n(_);function v(e){var t=e.ingredient,n=e.handleIngredientDelete,i=e.handleIngredientChange,a=Object(c.useState)(t),r=Object(s.a)(a,2),o=r[0],j=r[1],u=function(e){j(Object(l.a)(Object(l.a)({},o),e))};return Object(c.useEffect)((function(){i(o.id,o)}),[o,i]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{className:"recipe-edit__input",type:"text",onChange:function(e){return u({name:e.target.value})},value:o.name}),Object(d.jsx)("input",{className:"recipe-edit__input",type:"text",onChange:function(e){return u({amount:e.target.value})},value:o.amount}),Object(d.jsx)("button",{className:"btn btn--danger",onClick:function(){return n(t.id)},children:"\xd7"})]})}var g=n(55);function f(e){var t=e.recipe,n=Object(c.useContext)(C),i=n.handleRecipeChange,a=n.handleRecipeSelect,r=Object(c.useState)(t),o=Object(s.a)(r,2),j=o[0],p=o[1];function m(e){p(Object(l.a)(Object(l.a)({},j),e))}function h(e,t){var n=j.ingredients,c=n.findIndex((function(t){return t.id===e}));n[c]=t}function _(e){m({ingredients:j.ingredients.filter((function(t){return t.id!==e}))})}return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"overlay"}),Object(d.jsxs)("div",{className:"recipe-edit",children:[Object(d.jsxs)("div",{className:"recipe-edit__details-grid",children:[Object(d.jsx)("label",{htmlFor:"image",className:"recipe-edit__label",children:"Image"}),Object(d.jsx)("input",{type:"file",onChange:function(e){!function(e){var t=new FormData;t.append("file",e[0]),t.append("upload_preset","myrecipes"),x.a.post("https://api.cloudinary.com/v1_1/dwlvlqpso/image/upload",t).then((function(e){m({image:e.data.secure_url}),console.log("image set")}))}(e.target.files)}}),Object(d.jsx)("label",{htmlFor:"name",className:"recipe-edit__label",children:"Name"}),Object(d.jsx)("input",{type:"text",name:"name",id:"name",value:j.name,onChange:function(e){return m({name:e.target.value})},className:"recipe-edit__input"}),Object(d.jsx)("label",{htmlFor:"cookTime",className:"recipe-edit__label",children:"Cook Time"}),Object(d.jsx)("input",{type:"text",name:"cookTime",id:"cookTime",value:j.cookTime,onChange:function(e){return m({cookTime:e.target.value})},className:"recipe-edit__input"}),Object(d.jsx)("label",{htmlFor:"servings",className:"recipe-edit__label",children:"Servings"}),Object(d.jsx)("input",{type:"number",min:"1",name:"servings",id:"servings",value:j.servings,onChange:function(e){return m({servings:parseInt(e.target.value)||""})},className:"recipe-edit__input"})]}),Object(d.jsxs)("div",{className:"recipe-edit__instructions",children:[Object(d.jsx)("label",{htmlFor:"instructions",className:"recipe-edit__label",children:"Instructions"}),Object(d.jsx)("textarea",{name:"instructions",className:"recipe-edit__input",value:j.instructions,onChange:function(e){return m({instructions:e.target.value})},id:"instructions"})]}),Object(d.jsx)("br",{}),Object(d.jsxs)("div",{className:"recipe-edit__add_ingredient",children:[Object(d.jsx)("label",{className:"recipe-edit__label",children:"Ingredients"}),Object(d.jsx)("div",{onClick:function(){return function(){var e={id:Object(g.a)(),name:"",amount:""};m({ingredients:[].concat(Object(O.a)(j.ingredients),[e])})}()},children:Object(d.jsx)(u.a,{className:"recipe-edit__icon-add-ingredient",icon:b.b})})]}),Object(d.jsxs)("div",{className:"recipe-edit__ingredient-grid",children:[Object(d.jsx)("div",{children:"Name"}),Object(d.jsx)("div",{children:"Amount"}),Object(d.jsx)("div",{}),j.ingredients.map((function(e){return Object(d.jsx)(v,{handleEditInputChange:m,currentRecipe:j,handleIngredientChange:h,handleIngredientDelete:_,ingredient:e},e.id)}))]}),Object(d.jsxs)("div",{className:"recipe-edit__details-grid",children:[Object(d.jsx)("label",{htmlFor:"author",className:"recipe-edit__label",children:"Created by"}),Object(d.jsx)("input",{type:"text",name:"author",id:"author",value:j.author,onChange:function(e){return m({author:e.target.value})},className:"recipe-edit__input"})]}),Object(d.jsxs)("div",{className:"recipe-edit__button-container",children:[Object(d.jsx)("button",{className:"btn recipe-cancel-button",onClick:function(){return a(void 0)},children:"Cancel"}),Object(d.jsx)("button",{className:"btn recipe-edit__update-button",onClick:function(){i(j._id,j),a(void 0)},children:"Update"})]})]})]})}function N(){var e=Object(c.useContext)(C).handleRecipeSearch;return Object(d.jsx)("div",{className:"search-container",children:Object(d.jsxs)("div",{className:"searchbox",children:[Object(d.jsx)("input",{className:"search",type:"text",placeholder:"Search a recipe",onChange:function(t){return e(t.target.value)}}),Object(d.jsx)(u.a,{className:"search-icon",icon:b.c})]})})}n(53);var C=i.a.createContext();var k=function(){var e=Object(c.useState)(),t=Object(s.a)(e,2),n=t[0],i=t[1],a=Object(c.useState)([]),r=Object(s.a)(a,2),l=r[0],o=r[1],j=Object(c.useState)(),u=Object(s.a)(j,2),b=u[0],p=u[1],m=l.find((function(e){return e._id===n}));function O(){x.a.get("/api").then((function(e){var t=e.data;o(t)})).catch((function(e){return console.error("Error: ".concat(e))}))}Object(c.useEffect)((function(){O()}),[]);var _={handleRecipeAdd:v,handleRecipeDelete:function(e){x.a.delete("api/delete/"+e).then((function(t){o(l.filter((function(t){return t._id!==e})))}))},handleRecipeSelect:function(e){i(e)},handleRecipeChange:function(e,t){x.a.put("/api/put/"+e,t),O()},handleRecipeSearch:function(e){p(e)}};function v(){var e={id:Object(g.a)(),image:"/img/default.jpg",name:"",servings:1,cookTime:"",instructions:"",ingredients:[{id:Object(g.a)(),name:"",amount:""}],author:""};x()({url:"/api/save",method:"POST",data:e}).then((function(){console.log("Data has been sent to the server")})).catch((function(){console.log("Internal server error")})).then(O()),i(e._id)}var k=null!=b?l.filter((function(e){return e.name.toLowerCase().includes(b)})):l;return Object(d.jsx)(C.Provider,{value:_,children:Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)(N,{}),Object(d.jsx)(h,{recipes:l,filteredRecipes:k}),m&&Object(d.jsx)(f,{recipe:m}),Object(d.jsx)("div",{className:"recipe-list__add-recipe-btn-container",children:Object(d.jsx)("button",{className:"btn btn--primary",onClick:v,children:"Add Recipe"})})]})})};r.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(k,{})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.9a2d92cb.chunk.js.map